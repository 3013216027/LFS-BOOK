<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-scripts-symlinks">
  <?dbhtml filename="symlinks.html"?>

  <title>创建到设备的自定义符号链接</title>

  <sect2>
    <title>处理相似性质的设备</title>

    <para>正如 <xref linkend="ch-scripts-udev"/> 中解释的，具有相同功能的设备出现在 <filename class="directory">/dev</filename>
    目录下的顺序是随机的。假如你有一个 USB 摄像头和一个电视调谐器，<filename>/dev/video0</filename> 有可能是 USB 摄像头，
    <filename>/dev/video1</filename> 是电视调谐器，有时候又可能是反过来的。对于除声卡和网卡外的设备，
    都可以通过创建自定义持久性符号链接的 udev 规则来固定。网卡如何设置请看 <xref linkend="ch-scripts-network"/>，
    网卡的相关设置请看 <ulink url="&blfs-book;postlfs/devices.html">BLFS</ulink>。</para>

    <para>对于你所有的硬件，都有可能遇到此问题（尽管此问题可能在你当前的 Linux 发行版上不存在），
      在 <filename class="directory">/sys/class</filename> 或是
    <filename class="directory">/sys/block</filename> 目录下找到对应目录，比如，
    显卡可能的路径为 <filename class="directory">/sys/class/video4linux/video<replaceable>X</replaceable></filename>。
    找到该设备的唯一设备标识（通常，厂商和产品 ID 以及/或 序列号会有用）：</para>

<screen role="nodump"><userinput>udevadm info -a -p /sys/class/video4linux/video0</userinput></screen>

    <para>然后通过写入规则建立符号链接：</para>

<screen role="nodump"><userinput>cat &gt; /etc/udev/rules.d/83-duplicate_devs.rules &lt;&lt; "EOF"
<literal>
# Persistent symlinks for webcam and tuner
KERNEL=="video*", ATTRS{idProduct}=="1910", ATTRS{idVendor}=="0d81", \
    SYMLINK+="webcam"
KERNEL=="video*", ATTRS{device}=="0x036f", ATTRS{vendor}=="0x109e", \
    SYMLINK+="tvtuner"
</literal>
EOF</userinput></screen>

    <para>最终，<filename>/dev/video0</filename> 和 <filename>/dev/video1</filename> 依旧会随机分配给 USB 摄像头和电视调谐器，
    但是 <filename>/dev/tvtuner</filename> 和 <filename>/dev/webcam</filename> 将会固定的分配给正确的设备。</para>

 </sect2>

</sect1>
